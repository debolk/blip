<!doctype>
<html>
  <head>
    <title>Blip API-documentatie</title>
    <link rel="stylesheet" type="text/css" href="docs/docs.css">
    <script type"text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script type="text/javascript" src="docs/docs.js"></script>
  </head>
  <body>
    <h1>Blip API-documentatie</h1>
    <p>
      Binnen De Bolk wordt de informatie over alle leden opgeslagen in LDAP. Het Bolks Ledeninformatiepunt (Blip) biedt een makkelijker manier om informatie over leden op te vragen en te gebruiken bij het bouwen van je eigen applicaties voor De Bolk. Je kunt het vergelijken met een <a href="https://en.wikipedia.org/wiki/Facade_pattern">Facade pattern</a>.
    </p>

    <h2>Beveiliging</h2>
    <p>
      De informatie wordt beveiligd met OAuth via <a href="https://login.i.bolkhuis.nl/">https://login.i.bolkhuis.nl/</a>.
    </p>

    <h2>Person</h2>
    <p>De basiseenheid van de API is een Person. Je kunt deze aanmaken, updaten en lezen via de API. De attributen van een Person staan hieronder vermeld:</p>

    <table>
      <thead>
        <tr>
          <th>Attribuut</th>
          <th>Inhoud</th>
          <th>Leesbaar</th>
          <th>Schrijfbaar</th>
        </tr>
      </thead>
      <tbody>
        <tr><td>uid</td><td>uniek id</td><td>ja</td><td>nee</td></tr>
        <tr><td>href</td><td>URL van resource</td><td>ja</td><td>nee</td></tr>
        <tr><td>initials</td><td>initialen</td><td>ja</td><td>ja</td></tr>
        <tr><td>firstname</td><td>voornaam</td><td>ja</td><td>ja</td></tr>
        <tr><td>lastname</td><td>achternaam</td><td>ja</td><td>ja</td></tr>
        <tr><td>name</td><td>volledige naam</td><td>ja</td><td>nee</td></tr>
        <tr><td>email</td><td>e-mailadres</td><td>ja</td><td>ja</td></tr>
        <tr><td>gender</td><td>geslacht (M|F)</td><td>ja</td><td>ja</td></tr>
        <tr><td>phone</td><td>telefoonnummer vast</td><td>ja</td><td>ja</td></tr>
        <tr><td>mobile</td><td>telefoonnummer mobiel</td><td>ja</td><td>ja</td></tr>
        <tr><td>phone_parents</td><td>telefoonnummer ouders</td><td>ja</td><td>ja</td></tr>
        <tr><td>address</td><td>adres van het lid</td><td>ja</td><td>ja</td></tr>
        <tr><td>dateofbirth</td><td>geboortedatum (YYYY-MM-DD)</td><td>ja</td><td>ja</td></tr>
        <tr><td>membership</td><td>huidige status (lid, kandidaatlid, oudlid, lidvanverdienste, geenlid)</td><td>ja</td><td>ja</td></tr>
      </tbody>
    </table>

    <h2>Methodes</h2>
    <p>
      Alle methodes van de API accepteren en retourneren alleen JSON.
    </p>
    <section class="specs">
      <div class="spec get">
        <div class="header">
          <span class="method">GET</span>
          <span class="url">/persons</span>
          <span class="short">Alle informatie over alle personen</span>
        </div>
        <div class="description">
          <p>
            Retourneert de id, het e-mailadres, de volledige naam. Ook wordt de URL van ieder lid bijgevoegd.
          </p>
          <h4>OAuth toegangsniveau</h4>
          <p>Alleen leden</p>
          <h4>Parameters</h4>
          <p>geen</p>
          <h4>Resultaat</h4>
          <code>
            [{"id": "peter", "href": "http://blip.i.bolkhuis.nl/persons/peter", "email": "peter@nieuwedelft.nl", "name": "Peter Dummy"}]
          </code>
        </div>
      </div>

      <div class="spec post">
        <div class="header">
          <span class="method">POST</span>
          <span class="url">/persons</span>
          <span class="short">Maakt een nieuwe persoon</span>
        </div>
        <div class="description">
          <p>
            Accepteert een JSON-object dat een nieuwe persoon beschrijft, maakt deze aan in LDAP en retourneert de gegevens van de nieuwe persoon.
          </p>
          <h4>OAuth toegangsniveau</h4>
          <p>Alleen bestuur</p>
          <h4>Parameters</h4>
          <p>zie boven</p>
          <h4>Resultaat</h4>
          <code>
            {"id": "peter", "href": "http://blip.i.bolkhuis.nl/persons/peter", "email": "peter@nieuwedelft.nl", "name": "Peter Dummy"}
          </code>
        </div>
      </div>

      <div class="spec get">
        <div class="header">
          <span class="method">GET</span>
          <span class="url">/persons/{uid}</span>
          <span class="short">Informatie over een persoon</span>
        </div>
        <div class="description">
          <p>
            Retourneert de id, het e-mailadres, de volledige naam. Ook wordt de URL van ieder lid bijgevoegd. Vervang het {uid} door de gebruikersnaam van de gebruiker.
          </p>
          <h4>OAuth toegangsniveau</h4>
          <p>Alleen leden</p>
          <h4>Parameters</h4>
          <p>geen</p>
          <h4>Resultaat</h4>
          <code>
            {"id": "peter", "href": "http://blip.i.bolkhuis.nl/persons/peter", "email": "peter@nieuwedelft.nl", "name": "Peter Dummy"}
          </code>
        </div>
      </div>

      <div class="spec get">
        <div class="header">
          <span class="method">GET</span>
          <span class="url">/persons/{uid}/name</span>
          <span class="short">Volledige naam van een gebruiker</span>
        </div>
        <div class="description">
          <p>
            Retourneert alleen de volledige naam van een gebruiker. Dit endpoint is ook buiten het interne netwerk beschikbaar via <a href="https://myinfo.debolk.nl/persons/{uid}/name">https://myinfo.debolk.nl/persons/{uid}/name</a>.
          </p>
          <h4>OAuth toegangsniveau</h4>
          <p>Alleen leden</p>
          <h4>Parameters</h4>
          <p>geen</p>
          <h4>Resultaat</h4>
          <code>
            {"name": "Peter Dummy"}
          </code>
        </div>
      </div>

      <div class="spec put">
        <div class="header">
          <span class="method">PATCH</span>
          <span class="url">/persons/{uid}</span>
          <span class="short">Update de gegevens van een bestaand persoon</span>
        </div>
        <div class="description">
          <p>
            Accepteert een JSON-object dat de nieuwe gegevens van de persoon beschrijven. Parameters (zie onder) die niet worden meegegeven worden genegeerd. De methode retourneert de complete gegevens van het nieuwe lid.
          </p>
          <h4>OAuth toegangsniveau</h4>
          <p>Alleen bestuur</p>
          <h4>Parameters</h4>
          <p>zie boven</p>
          <h4>Resultaat</h4>
          <code>
            {"id": "peter", "href": "http://blip.i.bolkhuis.nl/persons/peter", "email": "peter@nieuwedelft.nl", "name": "Peter Dummy"}
          </code>
        </div>
      </div>

      <div class="spec get">
        <div class="header">
          <span class="method">GET</span>
          <span class="url">/members</span>
          <span class="short">Informatie over alle leden</span>
        </div>
        <div class="description">
          <p>
            Retourneert de gegevens van alle huidige, kandidaat- en oud-leden van De Bolk.
          </p>
          <h4>OAuth toegangsniveau</h4>
          <p>Alleen leden</p>
          <h4>Parameters</h4>
          <p>geen</p>
          <h4>Resultaat</h4>
          <code>
            [{"id": "peter", "href": "http://blip.i.bolkhuis.nl/persons/peter", "email": "peter@nieuwedelft.nl", "name": "Peter Dummy"}]
          </code>
        </div>
      </div>

      <div class="spec get">
        <div class="header">
          <span class="method">GET</span>
          <span class="url">/members/current</span>
          <span class="short">Informatie over alle huidige leden</span>
        </div>
        <div class="description">
          <p>
            Retourneert de gegevens van alle huidige, normale leden van De Bolk.
          </p>
          <h4>OAuth toegangsniveau</h4>
          <p>Alleen leden</p>
          <h4>Parameters</h4>
          <p>geen</p>
          <h4>Resultaat</h4>
          <code>
            [{"id": "peter", "href": "http://blip.i.bolkhuis.nl/persons/peter", "email": "peter@nieuwedelft.nl", "name": "Peter Dummy"}]
          </code>
        </div>
      </div>

      <div class="spec get">
        <div class="header">
          <span class="method">GET</span>
          <span class="url">/members/list</span>
          <span class="short">Gebruikersnaam en volledige naam van alle leden</span>
        </div>
        <div class="description">
          <p>
            Retourneert alle kandidaat-leden en gewone leden, maar alleen hun gebruikersnaam en volledige naam. Dit is handig voor het maken van drop-downs, etc. Dit endpoint is ook buiten het interne netwerk beschikbaar via <a href="https://myinfo.debolk.nl/members/list">https://myinfo.debolk.nl/members/list</a>.
          </p>
          <h4>OAuth toegangsniveau</h4>
          <p>Alleen leden</p>
          <h4>Parameters</h4>
          <p>geen</p>
          <h4>Resultaat</h4>
          <code>
            [{"uid": "peter", "name": "Peter Dummy"}]
          </code>
        </div>
      </div>


      <div class="spec get">
        <div class="header">
          <span class="method">GET</span>
          <span class="url">/members/past</span>
          <span class="short">Informatie over alle oud-leden</span>
        </div>
        <div class="description">
          <p>
            Retourneert de gegevens van alle oud-leden van De Bolk.
          </p>
          <h4>OAuth toegangsniveau</h4>
          <p>Alleen leden</p>
          <h4>Parameters</h4>
          <p>geen</p>
          <h4>Resultaat</h4>
          <code>
            [{"id": "peter", "href": "http://blip.i.bolkhuis.nl/persons/peter", "email": "peter@nieuwedelft.nl", "name": "Peter Dummy"}]
          </code>
        </div>
      </div>

      <div class="spec get">
        <div class="header">
          <span class="method">GET</span>
          <span class="url">/members/candidate</span>
          <span class="short">Informatie over alle kandidaatleden</span>
        </div>
        <div class="description">
          <p>
            Retourneert de gegevens van alle kandidaatleden van De Bolk.
          </p>
          <h4>OAuth toegangsniveau</h4>
          <p>Alleen leden</p>
          <h4>Parameters</h4>
          <p>geen</p>
          <h4>Resultaat</h4>
          <code>
            [{"id": "peter", "href": "http://blip.i.bolkhuis.nl/persons/peter", "email": "peter@nieuwedelft.nl", "name": "Peter Dummy"}]
          </code>
        </div>
      </div>
    </section>

    <h2>Vragen en Hulp</h2>
    <p>
      Heb je hulp nodig bij het gebruiken van Blip? Neem dan contact op met <a href="https://www.facebook.com/jakobbuis">Jakob</a>. Je kunt mijn contactgegevens krijgen bij <a href="mailto:bestuur@nieuwedelft.nl">het bestuur</a>.
    </p>
    <footer>
      Copyright 2013 Jakob Buis. Blip is beschikbaar onder <a href="http://www.gnu.org/licenses/gpl.html">GPL3</a>
    </footer>
  </body>
</html>
